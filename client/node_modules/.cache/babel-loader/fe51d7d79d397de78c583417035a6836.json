{"ast":null,"code":"var _jsxFileName = \"C:\\\\project\\\\MusicBolt-master\\\\MusicBolt-master\\\\client\\\\src\\\\core\\\\Card.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { isAuthenticated } from \"../auth/helper\";\nimport { addToFavourites, removeFromFavourites } from \"./helper/coreApiCalls\";\nimport { getUserFavourites } from \"../user/helper/userApiCalls\";\n\nconst Card = ({\n  track\n}) => {\n  const [rating, setRating] = useState(0);\n  const [isFav, setIsFav] = useState(false);\n  const {\n    artist,\n    duration,\n    id,\n    name,\n    image\n  } = track;\n  const {\n    user,\n    token\n  } = isAuthenticated();\n\n  const loadTrackRating = () => {\n    getUserFavourites(token, user).then(user => {\n      if (user.favourites) {\n        let track = user.favourites.filter(t => t.id == id);\n\n        if (track.length) {\n          setRating(track[0].rating);\n          setIsFav(true);\n        }\n      }\n    });\n  };\n\n  const showRemoveBtn = () => {\n    return isFav && React.createElement(\"button\", {\n      onClick: handleRemove,\n      className: \"btn btn-outline-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }, \"Remove\");\n  };\n\n  const handleRemove = () => {\n    getUserFavourites(token, user).then(user => {\n      removeFromFavourites(user, token, track.id).then(user => {\n        setRating(0);\n        setIsFav(false);\n      });\n    });\n  };\n\n  const handleSubmit = newRating => event => {\n    getUserFavourites(token, user).then(user => {\n      addToFavourites(user, token, track, newRating).then(user => {\n        setRating(newRating);\n        setIsFav(true);\n      });\n    });\n  };\n\n  useEffect(() => {\n    loadTrackRating();\n  }, [rating]);\n  return React.createElement(\"div\", {\n    className: \"trackCard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"trackCard-img-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: image,\n    alt: \"track image\",\n    className: \"card-img-top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"trackCard-body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"trackCard-name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, name), React.createElement(\"div\", {\n    className: \"trackCard-artist\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, artist)), React.createElement(\"div\", {\n    className: \"trackCard-favourite\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"removeBtn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, showRemoveBtn()), React.createElement(\"span\", {\n    className: \"starRating\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    id: `${id}rating5`,\n    type: \"radio\",\n    name: `${id}rating`,\n    value: \"5\",\n    onChange: handleSubmit(\"5\"),\n    checked: rating && rating == \"5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: `${id}rating5`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"5\"), React.createElement(\"input\", {\n    id: `${id}rating4`,\n    type: \"radio\",\n    name: `${id}rating`,\n    value: \"4\",\n    onChange: handleSubmit(\"4\"),\n    checked: rating && rating == \"4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: `${id}rating4`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"4\"), React.createElement(\"input\", {\n    id: `${id}rating3`,\n    type: \"radio\",\n    name: `${id}rating`,\n    value: \"3\",\n    onChange: handleSubmit(\"3\"),\n    checked: rating && rating == \"3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: `${id}rating3`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"3\"), React.createElement(\"input\", {\n    id: `${id}rating2`,\n    type: \"radio\",\n    name: `${id}rating`,\n    value: \"2\",\n    onChange: handleSubmit(\"2\"),\n    checked: rating && rating == \"2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: `${id}rating2`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"2\"), React.createElement(\"input\", {\n    id: `${id}rating1`,\n    type: \"radio\",\n    name: `${id}rating`,\n    value: \"1\",\n    onChange: handleSubmit(\"1\"),\n    checked: rating && rating == \"1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    htmlFor: `${id}rating1`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"1\"))));\n};\n\nexport default Card;","map":{"version":3,"sources":["C:/project/MusicBolt-master/MusicBolt-master/client/src/core/Card.js"],"names":["React","useState","useEffect","isAuthenticated","addToFavourites","removeFromFavourites","getUserFavourites","Card","track","rating","setRating","isFav","setIsFav","artist","duration","id","name","image","user","token","loadTrackRating","then","favourites","filter","t","length","showRemoveBtn","handleRemove","handleSubmit","newRating","event"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { isAuthenticated } from \"../auth/helper\";\nimport { addToFavourites, removeFromFavourites } from \"./helper/coreApiCalls\";\nimport { getUserFavourites } from \"../user/helper/userApiCalls\";\n\nconst Card = ({ track }) => {\n\tconst [rating, setRating] = useState(0);\n\tconst [isFav, setIsFav] = useState(false);\n\t\n\tconst { artist, duration, id, name, image } = track;\n\tconst { user, token } = isAuthenticated();\n\n\tconst loadTrackRating = () => {\n\t\tgetUserFavourites(token, user).then(user => {\n\t\t\tif (user.favourites) {\n\t\t\t\tlet track = user.favourites.filter(t => t.id == id);\n\t\t\t\tif (track.length) {\n\t\t\t\t\tsetRating(track[0].rating);\n\t\t\t\t\tsetIsFav(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tconst showRemoveBtn = () => {\n\t\treturn (\n\t\t\tisFav && (\n\t\t\t\t<button onClick={handleRemove} className=\"btn btn-outline-danger\">\n\t\t\t\t\tRemove\n\t\t\t\t</button>\n\t\t\t)\n\t\t);\n\t};\n\t\n\tconst handleRemove = () => {\n\t\tgetUserFavourites(token, user).then(user => {\n\t\t\tremoveFromFavourites(user, token, track.id).then(user => {\n\t\t\t\tsetRating(0);\n\t\t\t\tsetIsFav(false);\n\t\t\t})\n\t\t});\n\t};\n\n\tconst handleSubmit = newRating => event => {\n\t\tgetUserFavourites(token, user).then(user => {\n\t\t\taddToFavourites(user, token, track, newRating).then(user => {\n\t\t\t\tsetRating(newRating);\n\t\t\t\tsetIsFav(true);\n\t\t\t});\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tloadTrackRating();\n\t}, [rating]);\n\n\treturn (\n\t\t<div className=\"trackCard\">\n\t\t\t<div className=\"trackCard-img-container\">\n\t\t\t\t<img src={image} alt=\"track image\" className=\"card-img-top\" />\n\t\t\t</div>\n\t\t\t<div className=\"trackCard-body\">\n\t\t\t\t<div className=\"trackCard-name\">{name}</div>\n\t\t\t\t<div className=\"trackCard-artist\">{artist}</div>\n\t\t\t</div>\n\t\t\t<div className=\"trackCard-favourite\">\n\t\t\t\t<div className=\"removeBtn\">{showRemoveBtn()}</div>\n\t\t\t\t<span className=\"starRating\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={`${id}rating5`}\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname={`${id}rating`}\n\t\t\t\t\t\tvalue=\"5\"\n\t\t\t\t\t\tonChange={handleSubmit(\"5\")}\n\t\t\t\t\t\tchecked={rating && rating == \"5\"}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor={`${id}rating5`}>5</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={`${id}rating4`}\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname={`${id}rating`}\n\t\t\t\t\t\tvalue=\"4\"\n\t\t\t\t\t\tonChange={handleSubmit(\"4\")}\n\t\t\t\t\t\tchecked={rating && rating == \"4\"}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor={`${id}rating4`}>4</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={`${id}rating3`}\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname={`${id}rating`}\n\t\t\t\t\t\tvalue=\"3\"\n\t\t\t\t\t\tonChange={handleSubmit(\"3\")}\n\t\t\t\t\t\tchecked={rating && rating == \"3\"}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor={`${id}rating3`}>3</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={`${id}rating2`}\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname={`${id}rating`}\n\t\t\t\t\t\tvalue=\"2\"\n\t\t\t\t\t\tonChange={handleSubmit(\"2\")}\n\t\t\t\t\t\tchecked={rating && rating == \"2\"}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor={`${id}rating2`}>2</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={`${id}rating1`}\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname={`${id}rating`}\n\t\t\t\t\t\tvalue=\"1\"\n\t\t\t\t\t\tonChange={handleSubmit(\"1\")}\n\t\t\t\t\t\tchecked={rating && rating == \"1\"}\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor={`${id}rating1`}>1</label>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Card;\n"]},"metadata":{},"sourceType":"module"}